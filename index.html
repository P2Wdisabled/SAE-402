<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <title>Ville Anglaise en A-Frame (.glb)</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <style>
      body { margin: 0; }
    </style>
  </head>
  <body>
    <a-scene>
      <a-plane position="0 0 0" rotation="-90 0 0" width="300" height="300" color="#777"></a-plane>



      

<!-- /* coté haut */ -->
      <!-- Rangée batiment vert ( gauche)  -->
      <a-box position="6 0 -6" scale="5 3 5" rotation="0 180 0" color="#4CC3D9"></a-box>
      <a-box position="1 0 -6" scale="5 3 5" rotation="0 180 0" color="#4CC3D9"></a-box>
      <a-box position="-4 0 -6" scale="5 3 5" rotation="0 180 0" color="#4CC3D9"></a-box>
      <a-box position="-9 0 -6" scale="5 3 5" rotation="0 180 0" color="#4CC3D9"></a-box>
      <a-box position="-14 0 -6" scale="5 3 5" rotation="0 180 0" color="#4CC3D9"></a-box>
      <a-box position="-19 0 -6" scale="5 3 5" rotation="0 180 0" color="#4CC3D9"></a-box>
      <a-box position="11 0 -6" scale="5 3 5" rotation="0 180 0" color="#4CC3D9"></a-box>
      <a-box position="-24 0 -6" scale="5 3 5" rotation="0 180 0" color="#4CC3D9"></a-box>

      <!-- Rangée batiment porte caché (droite)  -->
      <a-box position="6 0 5" scale="5 3 5" color="#4CC3D9"></a-box>
      <a-box position="2 0 5" scale="5 3 5" color="#4CC3D9"></a-box>
      <a-box position="-2 0 5" scale="5 3 5" color="#4CC3D9"></a-box>
      <a-box position="-6 0 5" scale="5 3 5" color="#4CC3D9"></a-box>
      <a-box position="-10 0 5" scale="5 3 5" color="#4CC3D9"></a-box>
      <a-box position="-14 0 5" scale="5 3 5" color="#4CC3D9"></a-box>
      <a-box position="-22 0 5" scale="5 3 5" color="#4CC3D9"></a-box>
      <a-box position="-18 0 5" scale="5 3 5" color="#4CC3D9"></a-box>
      <a-box position="10 0 5" scale="5 3 5" color="#4CC3D9"></a-box>

      <!-- Divers -->
      <a-box position="16 0 -0.5" scale="6 3 6" rotation="0 -90 0" color="#4CC3D9"></a-box>
      <a-box position="-28 0 10.9" scale="17 3 17" color="#4CC3D9"></a-box>
      <a-box position="-30 -0.8 -6" scale="8 3 8" color="#4CC3D9"></a-box>
      <a-box position="-32 -0.8 -8" scale="8 3 8" rotation="0 90 0" color="#4CC3D9"></a-box>
      <a-box position="-32 -0.8 -15.5" scale="8 3 8" rotation="0 90 0" color="#4CC3D9"></a-box>
     
<!-- /* coté bas */ -->

    <a-box position="-145 -0.8 2" scale="20 3 8" rotation="0 90 0" color="#4CC3D9"></a-box>
    <a-box position="-135 -0.8 -10" scale="20 3 8" rotation="0 180 0" color="#4CC3D9"></a-box>
    <a-box position="-127.5 -0.8 -10" scale="8 3 8" rotation="0 180 0" color="#4CC3D9"></a-box>
    <a-box position="-120 -0.8 -10" scale="8 3 8" rotation="0 180 0" color="#4CC3D9"></a-box>
    <a-box position="-112.5 -0.8 -10" scale="8 3 8" rotation="0 180 0" color="#4CC3D9"></a-box>
    <a-box position="-105 -0.8 -10" scale="8 3 8" rotation="0 180 0" color="#4CC3D9"></a-box>
    <a-box position="-97.5 -0.8 -10" scale="8 3 8" rotation="0 180 0" color="#4CC3D9"></a-box>
    <a-box position="-90 -0.8 -10" scale="8 3 8" rotation="0 180 0" color="#4CC3D9"></a-box>
    <a-box position="-82.5 -0.8 -10" scale="8 3 8" rotation="0 180 0" color="#4CC3D9"></a-box>
    <a-box position="-75 -0.8 -10" scale="8 3 8" rotation="0 180 0" color="#4CC3D9"></a-box>
    <a-box position="-67.5 -0.8 -10" scale="8 3 8" rotation="0 180 0" color="#4CC3D9"></a-box>
    <a-box position="-60 -0.8 -10" scale="8 3 8" rotation="0 180 0" color="#4CC3D9"></a-box>

    <a-box position="-132 -0.8 13" scale="22 3 8" rotation="0 0 0" color="#4CC3D9"></a-box>
    <a-box position="-117 -0.8 13" scale="25 3 8" rotation="0 0 0" color="#4CC3D9"></a-box>
    <a-box position="-80 -0.8 13" scale="25 3 8" rotation="0 0 0" color="#4CC3D9"></a-box>
    <a-box position="-65 -0.8 13" scale="16 3 8" rotation="0 0 0" color="#4CC3D9"></a-box>

<!-- /* Coté mairie */ -->
    <a-box position="-50 -0.8 -100" scale="60 3 60" rotation="0 0 0" color="#4CC3D9"></a-box>
    <a-box position="-50 -0.8 -40" scale="15 3 15" rotation="0 0 0" color="#4CC3D9"></a-box>




<!-- Coté riche -->
<a-box position="-100 0 100" scale="25 3 25" rotation="0 180 0" color="#4CC3D9"></a-box>
<a-box position="-140 0 40" scale="7 3 7" rotation="0 270 0" color="#4CC3D9"></a-box>
<a-box position="-140 0 60" scale="7 3 7" rotation="0 270 0" color="#4CC3D9"></a-box>
<a-box position="-140 0 80" scale="7 3 7" rotation="0 270 0" color="#4CC3D9"></a-box>
<a-box position="-140 0 100" scale="7 3 7" rotation="0 270 0" color="#4CC3D9"></a-box>
<a-box position="-140 0 120" scale="7 3 7" rotation="0 270 0" color="#4CC3D9"></a-box>
<a-box position="-140 0 140" scale="7 3 7" rotation="0 270 0" color="#4CC3D9"></a-box>
<a-box position="-60 0 40" scale="7 3 7" rotation="0 90 0" color="#4CC3D9"></a-box>
<a-box position="-60 0 60" scale="7 3 7" rotation="0 90 0" color="#4CC3D9"></a-box>
<a-box position="-60 0 80" scale="7 3 7" rotation="0 90 0" color="#4CC3D9"></a-box>
<a-box position="-60 0 100" scale="7 3 7" rotation="0 90 0" color="#4CC3D9"></a-box>
<a-box position="-60 0 120" scale="7 3 7" rotation="0 90 0" color="#4CC3D9"></a-box>
<a-box position="-60 0 140" scale="7 3 7" rotation="0 90 0" color="#4CC3D9"></a-box>
<a-box position="-87 0 130" scale="15 3 30" rotation="0 90 0" color="#4CC3D9"></a-box>
<a-box position="-112 0 130" scale="15 3 30" rotation="0 90 0" color="#4CC3D9"></a-box>
<a-box position="-82 0 60" scale="7 3 7" rotation="0 90 0" color="#4CC3D9"></a-box>
<a-box position="-82 0 40" scale="7 3 7" rotation="0 90 0" color="#4CC3D9"></a-box>
<a-box position="-118 0 60" scale="7 3 7" rotation="0 270 0" color="#4CC3D9"></a-box>
<a-box position="-118 0 40" scale="7 3 7" rotation="0 270 0" color="#4CC3D9"></a-box>

      <a-entity id="cameraRig" position="-98.9 20 2" custom-controls>
        <a-entity camera look-controls wasd-controls="enabled: false"></a-entity>
      </a-entity>

      <script>
        AFRAME.registerComponent('custom-controls', {
          schema: { speed: { type: 'number', default: 20 } },
          init: function () {
        this.keys = {};
        this.onKeyDown = this.onKeyDown.bind(this);
        this.onKeyUp = this.onKeyUp.bind(this);
        window.addEventListener('keydown', this.onKeyDown);
        window.addEventListener('keyup', this.onKeyUp);
          },
          remove: function () {
        window.removeEventListener('keydown', this.onKeyDown);
        window.removeEventListener('keyup', this.onKeyUp);
          },
          onKeyDown: function (e) {
        this.keys[e.key.toLowerCase()] = true;
          },
          onKeyUp: function (e) {
        this.keys[e.key.toLowerCase()] = false;
          },
          tick: function (time, deltaTime) {
        var delta = deltaTime / 1000;
        var distance = this.data.speed * delta;
        var rig = this.el.object3D;
        var cameraEl = this.el.querySelector('[camera]');
        var cameraObj = cameraEl.object3D;
        var moveDir = new THREE.Vector3();
        var forward = new THREE.Vector3(0, 0, -1);
        forward.applyQuaternion(cameraObj.quaternion).normalize();
        var up = new THREE.Vector3(0, 1, 0);
        var right = new THREE.Vector3().crossVectors(forward, up).normalize();

        if (this.keys['z']) { moveDir.add(forward); }
        if (this.keys['s']) { moveDir.add(forward.clone().negate()); }
        if (this.keys['d']) { moveDir.add(right); }
        if (this.keys['q']) { moveDir.add(right.clone().negate()); }
        if (this.keys[' ']) { moveDir.add(up); }
        if (this.keys['control']) { moveDir.add(up.clone().negate()); }

        if (moveDir.length() > 0) {
          moveDir.normalize();
          rig.position.add(moveDir.multiplyScalar(distance));
        }
          }
        });


  </script>

  
    </a-scene>
  </body>
</html>