<!DOCTYPE html>
<html lang="en"></html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NPC avec A-Frame et Three.js</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.aframe.io/releases/1.2.0/aframe-extras.min.js"></script>
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-physics-system/v3.3.0/dist/aframe-physics-system.min.js"></script>
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v4.1.2/dist/aframe-extras.min.js"></script>
    <link rel="stylesheet" href="stylePopUp.css">
</head>
<body>

    <a-scene physics="debug: true">
        <a-assets>
             <a-asset-item id="npc1" src="./NPC/Man.glb"></a-asset-item>
             <a-asset-item id="npc2" src="./NPC/Business%20Man.glb"></a-asset-item>
             <a-asset-item id="npc3" src="./NPC/Hoodie%20Character.glb"></a-asset-item>
         </a-assets>
 
         <a-camera id="camera-entity" camera look-controls wasd-controls="acceleration: 25" position="0 1.6 5">
             <a-cursor></a-cursor>
                <!-- <a-text
                value="Hey YO WHAT'S UP ?"
            position="-0.5 0 -2.5"
            
            color="#FFF"
            width="4"> </a-text> -->
             <a-text id="score" position="0 0 -2" >Score: 0</a-text>
             <a-plane id="overlay" position="0 0.5 -2" visible ="false"></a-plane>
             <a-plane id="dialogue-box" 
         position="0 1.5 -2" 
         width="2.5" 
         height="1.5" 
         visible="false"
         material="color: black; opacity: 0.8; shader: flat"
         geometry="primitive: plane; width: 2.5; height: 1.5">


         <a-text id="dialogue-text" 
         value="Hi! How can I help you?" 
         position="0 -0.2 0.01" 
         width="2" 
         align="center"
         text="color: white; wrapCount: 30; font: mozillavr">
 </a-text>
 
 <a-text id="difficulty-text" 
         value="Difficulty:" 
         position="-1 0.1 0.01" 
         width="1.5"
         text="color: yellow; wrapCount: 20; font: mozillavr">
 </a-text>
 
 <a-text id="remaining-text" 
         value="Remaining:" 
         position="1 0.1 0.01" 
         width="1.5"
         text="color: cyan; wrapCount: 20; font: mozillavr">
 </a-text>
 
 <!-- Boutons de choix interactifs -->
 <a-text id="choice1" 
         value="I don't speak English" 
         position="-0.8 -0.4 0.01" 
         width="1.5"
         class="clickable"
         text="color: lightblue; wrapCount: 20; font: mozillavr"
         event-set__mouseenter="_event: mouseenter; text.color: cyan"
         event-set__mouseleave="_event: mouseleave; text.color: lightblue"
         onclick="handleChoice(1)">
 </a-text>
 
 <a-text id="choice2" 
         value="Where is the police station?" 
         position="0.8 -0.4 0.01" 
         width="1.5"
         class="clickable"
         text="color: lightgreen; wrapCount: 20; font: mozillavr"
         event-set__mouseenter="_event: mouseenter; text.color: lime"
         event-set__mouseleave="_event: mouseleave; text.color: lightgreen"
         onclick="handleChoice(2)">
 </a-text>
 
 <!-- Bouton de fermeture -->
 <a-text id="close" 
         value="Fermer" 
         position="0 -0.7 0.01" 
         width="1"
         class="clickable"
         text="color: red; wrapCount: 15; font: mozillavr"
         event-set__mouseenter="_event: mouseenter; text.color: darkred"
         event-set__mouseleave="_event: mouseleave; text.color: red"
         onclick="closeDialogue()">
 </a-text>
 
 <!-- Contrôleurs VR avec Raycaster -->
 <a-entity id="leftController" oculus-touch-controls="hand: left"></a-entity>
 
 <a-entity id="rightController" oculus-touch-controls="hand: right">
     <a-entity raycaster="showLine:true;objects: .clickable" cursor></a-entity>
 </a-entity>
 
            </a-plane>
            <a-entity id="leftController" oculus-touch-controls="hand: left"></a-entity>
            <a-entity id="rightController" oculus-touch-controls="hand: right">
                <a-entity raycaster="showLine:true;objects: .clickable" cursor></a-entity>
             </a-entity>
         </a-camera>
 
         <a-entity id="npc1-container" position="2 0 -5">
            <a-entity id="npc1-entity" gltf-model="#npc1" scale="0.2 0.2 0.2"></a-entity>
            <a-box id="npc1-hitbox" class="clickable" position="0 0.5 0" width="1" height="1" depth="1" opacity="0" transparent="true"></a-box>
        </a-entity>
        
        <a-entity id="npc2-container" position="-2 0 -5">
            <a-entity id="npc2-entity" gltf-model="#npc2" scale="0.5 0.5 0.5"></a-entity>
            <a-box id="npc2-hitbox" class="clickable" position="0 0.5 0" width="1" height="1" depth="1" opacity="0" transparent="true"></a-box>
        </a-entity>
        
        <a-entity id="npc3-container" position="0 0 -5">
            <a-entity id="npc3-entity" gltf-model="#npc3" scale="0.5 0.5 0.5"></a-entity>
            <a-box id="npc3-hitbox" class="clickable" position="0 0.5 0" width="1" height="1" depth="1" opacity="0" transparent="true"></a-box>
        </a-entity>
        

        <!-- Lumière -->
        <a-light type="directional" position="2 4 3" intensity="0.6"></a-light>
        <a-light type="ambient" intensity="0.4"></a-light>

        <!-- Ajouter le sol -->
        <a-plane rotation="-90 0 0" position="0 0 0" width="20" height="20" color="#7BC8A4" static-body></a-plane>

        <a-box position="0 1 -10" width="20" height="2" depth="0.1" visible="true" static-body="shape: box;"></a-box>
        <a-box position="0 1 10" width="20" height="2" depth="0.1" visible="true" static-body="shape: box;"></a-box>
        <a-box position="-10 1 0" width="0.1" height="2" depth="20" visible="true" static-body="shape: box;"></a-box>
        <a-box position="10 1 0" width="0.1" height="2" depth="20" visible="true" static-body="shape: box;"></a-box>
    </a-scene>
    

    <script src="clickable.js"></script>
    <!-- <div id="score">Score: 0</div> -->
    <div id="feedback-message"></div>


</body>
</html>
